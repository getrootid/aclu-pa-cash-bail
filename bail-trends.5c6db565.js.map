{"mappings":"A,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,W,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,c,I,G,E,E,O,C,mB,I,G,E,E,O,C,gB,I,G,I,E,E,S,E,S,I,E,E,S,E,E,S,E,E,S,E,E,S,E,E,QCcA,OAAM,EACJ,YACE,CAAE,CACF,CAAM,CACN,CAAc,CACd,CAAQ,CACR,CAAW,CACX,CAAU,CACV,EAAQ,EAAE,CACV,EAAU,EAAE,CACZ,CACA,IAAI,CAAC,MAAM,CAAG,EACd,IAAI,CAAC,cAAc,CAAG,EACtB,IAAI,CAAC,QAAQ,CAAG,EAChB,IAAI,CAAC,KAAK,CAAG,EACb,IAAI,CAAC,WAAW,CAAG,EACnB,IAAI,CAAC,UAAU,CAAG,EAIlB,IAAM,EAAW,OACf,iBAFc,SAAS,aAAa,CAAC,CAAC,CAAC,EAAE,EAAG,oBAAoB,CAAC,GAEvC,KAAK,CAAC,OAAO,CAAC,UAAW,IAGrD,CAAA,IAAI,CAAC,WAAW,CAAG,EAAW,GAC9B,IAAI,CAAC,YAAY,CAAG,IAAI,CAAC,WAAW,CAAI,CAAA,EAAO,MAAM,CAAG,CAAA,EACxD,IAAI,CAAC,aAAa,CAAG,GACrB,IAAI,CAAC,OAAO,CAAG,GACf,IAAI,CAAC,OAAO,CAAG,EACf,IAAI,CAAC,YAAY,CAAG,IAAI,CAAC,OAAO,CAAG,EACnC,IAAI,CAAC,YAAY,CAAG,IAAI,CAAC,OAAO,CAAG,GAEnC,IAAM,EAAY,IAAI,CAAC,aAAa,CAAG,IAAI,CAAC,YAAY,CAAG,EAC3D,CAAA,IAAI,CAAC,GAAG,CAAG,EAAA,MAAA,CACD,CAAC,CAAC,EAAE,EAAG,oBAAoB,CAAC,EACnC,MAAM,CAAC,OACP,IAAI,CAAC,UAAW,C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","sources":["<anon>","src/js/classes/Map.js","node_modules/topojson-client/src/index.js","node_modules/topojson-client/src/bbox.js","node_modules/topojson-client/src/transform.js","node_modules/topojson-client/src/identity.js","node_modules/topojson-client/src/feature.js","node_modules/topojson-client/src/reverse.js","node_modules/topojson-client/src/mesh.js","node_modules/topojson-client/src/stitch.js","node_modules/topojson-client/src/merge.js","node_modules/topojson-client/src/neighbors.js","node_modules/topojson-client/src/bisect.js","node_modules/topojson-client/src/quantize.js","node_modules/topojson-client/src/untransform.js"],"sourcesContent":["\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequireae46\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequireae46\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"iZIRD\", function(module, exports) {\n\n$parcel$export(module.exports, \"BailRateMap\", () => $dd40b9949c102a18$export$b0eb41d134a3444e);\n$parcel$export(module.exports, \"RaceMapContainer\", () => $dd40b9949c102a18$export$8f762ceff330fdba);\n$parcel$export(module.exports, \"SwitchableMap\", () => $dd40b9949c102a18$export$8c49d322883a3053);\n\nvar $9NlP8 = parcelRequire(\"9NlP8\");\nparcelRequire(\"f5Hsa\");\nvar $9lyWK = parcelRequire(\"9lyWK\");\n\nvar $gnvXE = parcelRequire(\"gnvXE\");\n\nvar $ixxlC = parcelRequire(\"ixxlC\");\n\nvar $ge6e3 = parcelRequire(\"ge6e3\");\n\nvar $4UL1w = parcelRequire(\"4UL1w\");\nclass $dd40b9949c102a18$var$ColorScaleLegend {\n    constructor(id, labels, colorThreshold, averages, onMouseOver, onMouseOut, title = \"\", offsetY = 35){\n        this.labels = labels;\n        this.colorThreshold = colorThreshold;\n        this.averages = averages;\n        this.title = title;\n        this.onMouseOver = onMouseOver;\n        this.onMouseOut = onMouseOut;\n        // SVG viewbox width matches CSS width to avoid scaling/zoom\n        const element = document.querySelector(`#${id} .color-scale-legend`);\n        const svgWidth = Number(getComputedStyle(element).width.replace(/[^\\d.]/g, \"\"));\n        this.legendWidth = svgWidth - 30;\n        this.sectionWidth = this.legendWidth / (labels.length - 1);\n        this.sectionHeight = 10;\n        this.offsetX = 10;\n        this.offsetY = offsetY;\n        this.labelOffsetX = this.offsetX - 9;\n        this.labelOffsetY = this.offsetY + 28;\n        const svgHeight = this.sectionHeight + this.labelOffsetY + 10;\n        this.svg = $9NlP8.select(`#${id} .color-scale-legend`).append(\"svg\").attr(\"viewBox\", `0 0 ${svgWidth} ${svgHeight}`);\n    }\n    highlightBars(buckets) {\n        // darken all legend bars\n        this.svg.selectAll(\".legend-bar\").style(\"opacity\", \"0.2\");\n        // darken all legend labels\n        this.svg.selectAll(\".legend-text\").style(\"opacity\", \"0.4\");\n        // highlight desired legend bars\n        buckets.forEach((bucket)=>{\n            this.svg.selectAll(`.legend-bar[${(0, $4UL1w.BUCKET_ATTRIBUTE)}=\"${bucket}\"]`).style(\"opacity\", \"1\");\n            this.svg.selectAll(`.legend-text[${(0, $4UL1w.BUCKET_ATTRIBUTE)}*=\"${bucket}\"]`).style(\"opacity\", \"1\");\n        });\n    }\n    resetHighlight() {\n        this.svg.selectAll(\".legend-bar\").style(\"opacity\", \"1\");\n        this.svg.selectAll(\".legend-text\").style(\"opacity\", \"1\");\n    }\n    render() {\n        const legend = this.svg.selectAll(\"g\").data(this.labels.slice(0, this.labels.length - 1)).enter().append(\"g\").attr(\"data-label\", (d)=>d);\n        // Add colored bars\n        legend.append(\"rect\").attr(\"class\", \"legend-bar\").attr(\"x\", (_, i)=>this.offsetX + i * this.sectionWidth).attr(\"y\", this.offsetY).attr(\"width\", this.sectionWidth).attr(\"height\", this.sectionHeight).attr((0, $4UL1w.BUCKET_ATTRIBUTE), (_, i)=>this.labels[i + 1]).style(\"fill\", (d)=>this.colorThreshold(d)).on(\"mouseover\", (event)=>this.onMouseOver(event)).on(\"mouseout\", ()=>this.onMouseOut());\n        // Add labels\n        const legendTextClassName = \"legend-text\";\n        const smallLabelOffset = (i)=>this.labels[i].toString().length < 2 ? 2 : 0;\n        legend.append(\"text\").attr(\"x\", (_, i)=>this.labelOffsetX + i * this.sectionWidth + smallLabelOffset(i)).attr(\"y\", this.labelOffsetY).attr(\"class\", legendTextClassName).attr((0, $4UL1w.BUCKET_ATTRIBUTE), (d)=>{\n            const color = this.colorThreshold(d);\n            const [start, end] = this.colorThreshold.invertExtent(color);\n            return `${start}-${end}`;\n        }).text((_, i)=>i === 0 ? \"\" : (0, $ge6e3.toPercent)(this.labels[i], 0, false));\n        // Set up average label\n        const maxValue = this.labels[this.labels.length - 1];\n        this.averages.forEach((avg)=>{\n            const position = (0, $ge6e3.getPercentOffset)(avg.value, this.labels[0], maxValue);\n            const avgOffsetX = this.offsetX + this.legendWidth * position / 100;\n            const legendLineClassName = \"legend-avg-line\";\n            this.svg.append(\"line\").attr(\"x1\", avgOffsetX).attr(\"x2\", avgOffsetX).attr(\"y1\", this.offsetY + 10).attr(\"y2\", this.offsetY - 5).attr(\"class\", legendLineClassName);\n            this.svg.append(\"text\").attr(\"x\", avgOffsetX - 13).attr(\"y\", this.offsetY - 25).attr(\"class\", legendTextClassName).text(avg.label);\n            this.svg.append(\"text\").attr(\"x\", avgOffsetX - 15).attr(\"y\", this.offsetY - 10).attr(\"class\", legendTextClassName).text((0, $ge6e3.toPercent)(avg.value));\n            // Add title, if any\n            this.svg.append(\"text\").attr(\"x\", this.legendWidth / 2 - 45).attr(\"y\", this.offsetY + 45).attr(\"class\", legendTextClassName).text(this.title);\n        });\n    }\n}\nclass $dd40b9949c102a18$var$Map {\n    constructor(selector, tooltipSchema = {}){\n        this.svg = $9NlP8.select(selector).append(\"svg\").attr(\"viewBox\", `0 0 ${(0, $4UL1w.DEFAULT_MAP_WIDTH)} ${(0, $4UL1w.DEFAULT_MAP_HEIGHT)}`);\n        this.projection = $9NlP8.geoMercator().scale(5500).center([\n            -75.75,\n            40.5\n        ]);\n        this.renderTooltip = (0, $ixxlC.configureTooltip)({\n            ...tooltipSchema,\n            placement: \"top\"\n        });\n    }\n    renderCity(name, coords, labelCoords) {\n        this.svg.append(\"circle\").attr(\"transform\", `translate(${this.projection(coords)})`).attr(\"r\", 4).attr(\"class\", \"city-label-dot\").attr(\"fill\", \"white\");\n        this.svg.append(\"text\").attr(\"transform\", `translate(${this.projection(labelCoords)})`).attr(\"class\", \"city-label\").text(name);\n    }\n    renderCities() {\n        this.renderCity(\"Philadelphia\", [\n            -75.1652,\n            39.9526\n        ], [\n            -75.6,\n            40.06\n        ]);\n        this.renderCity(\"Harrisburg\", [\n            -76.8867,\n            40.2732\n        ], [\n            -77.15,\n            40.375\n        ]);\n        this.renderCity(\"Pittsburgh\", [\n            -79.9959,\n            40.4406\n        ], [\n            -80.25,\n            40.3\n        ]);\n    }\n    renderPA(features, path) {\n        return this.svg.append(\"g\").attr(\"class\", \"county\").selectAll(\"path\").data(features).enter().append(\"path\").attr(\"d\", path).attr(\"class\", \"county-path\").attr((0, $4UL1w.COUNTY_NAME_ATTRIBUTE), (feature)=>feature.properties[\"NAME\"]).on(\"mouseenter focus\", this.onMouseEnter.bind(this)).on(\"mouseout\", this.onMouseOut.bind(this));\n    }\n    onMouseEnter(event) {\n        this.showTooltip(event.target, {});\n    }\n    onMouseOut() {\n        this.hideTooltip();\n    }\n    showTooltip(element, data) {\n        this.tooltip = this.renderTooltip(element, [\n            data\n        ], data.name);\n        this.tooltip.show();\n    }\n    hideTooltip() {\n        if (this.tooltip) {\n            this.tooltip.hide();\n            this.tooltip.destroy();\n        }\n    }\n    highlightMap(element) {\n        const bucket = element.getAttribute((0, $4UL1w.BUCKET_ATTRIBUTE));\n        const attributeSelector = `${(0, $4UL1w.BUCKET_ATTRIBUTE)}=\"${bucket}\"`;\n        this.svg.selectAll(`path:not([${attributeSelector}])`).classed(\"faded\", true);\n    }\n    resetHighlight() {\n        this.svg.selectAll(\"path\").classed(\"faded\", false);\n    }\n    render() {\n        const path = $9NlP8.geoPath().projection(this.projection);\n        const countyTopoJson = JSON.parse(JSON.stringify((0, $gnvXE.COUNTY_MAP_DATA)));\n        const features = (0, $9lyWK.default)(countyTopoJson, countyTopoJson.objects[\"pa_counties\"]).features;\n        this.renderPA(features, path);\n    }\n}\nclass $dd40b9949c102a18$export$b0eb41d134a3444e extends $dd40b9949c102a18$var$Map {\n    constructor(id, data, rateKey, average, tooltipHeader){\n        super(`#${id} .map`, {\n            rows: [\n                {\n                    rowHeader: tooltipHeader,\n                    dataKey: \"x\",\n                    render: (value)=>(0, $ge6e3.toPercent)(value)\n                }\n            ]\n        });\n        this.id = id;\n        this.data = data;\n        this.rateKey = rateKey;\n        this.colorThreshold = (0, $ge6e3.getColorThreshold)((0, $4UL1w.BAIL_RATE_MAP_COLOR_CONFIG).domain, (0, $4UL1w.BAIL_RATE_MAP_COLOR_CONFIG).colors);\n        const onLegendMouseOver = (event)=>{\n            this.highlightBar(event.target);\n            this.highlightMap(event.target);\n        };\n        const onLegendMouseOut = ()=>this.resetHighlight();\n        onLegendMouseOver.bind(this);\n        onLegendMouseOut.bind(this);\n        this.legend = new $dd40b9949c102a18$var$ColorScaleLegend(id, (0, $4UL1w.BAIL_RATE_MAP_COLOR_CONFIG).domain, this.colorThreshold, [\n            {\n                value: average,\n                label: \"Avg\"\n            }\n        ], onLegendMouseOver, onLegendMouseOut);\n        this.render();\n    }\n    onMouseEnter(event) {\n        const countyName = event.target.getAttribute((0, $4UL1w.COUNTY_NAME_ATTRIBUTE));\n        const attributeSelector = `${(0, $4UL1w.COUNTY_NAME_ATTRIBUTE)}=\"${countyName}\"`;\n        super.onMouseEnter(event);\n        this.svg.selectAll(`path:not([${attributeSelector}])`).classed(\"faded\", true);\n        this.highlightBar(event.target);\n    }\n    onMouseOut(event) {\n        super.onMouseOut(event);\n        this.resetHighlight();\n    }\n    showTooltip(element) {\n        const countyName = element.getAttribute((0, $4UL1w.COUNTY_NAME_ATTRIBUTE));\n        const countyRate = Number(element.getAttribute(\"data-rate\"));\n        super.showTooltip(element, {\n            name: countyName,\n            x: countyRate\n        });\n    }\n    highlightBar(element) {\n        const bucket = Number(element.getAttribute((0, $4UL1w.BUCKET_ATTRIBUTE)));\n        this.legend.highlightBars([\n            bucket\n        ]);\n    }\n    resetHighlight() {\n        super.resetHighlight();\n        this.legend.resetHighlight();\n    }\n    renderPA(features, path) {\n        this.data.forEach((row)=>{\n            const countyName = row.name;\n            const cashBailRate = row[this.rateKey];\n            const feature = features.find((f)=>f.properties[\"NAME\"] === countyName);\n            feature.properties.rate = cashBailRate;\n            feature.properties.color = this.colorThreshold(cashBailRate);\n            feature.properties.bucket = this.colorThreshold.invertExtent(feature.properties.color)[1];\n        });\n        const paths = super.renderPA(features, path);\n        paths.style(\"fill\", (feature)=>feature.properties.color).attr((0, $4UL1w.BUCKET_ATTRIBUTE), (feature)=>feature.properties.bucket).attr(\"data-rate\", (feature)=>feature.properties.rate);\n        this.legend.render();\n        this.renderCities();\n    }\n}\nclass $dd40b9949c102a18$var$BailRaceMap extends $dd40b9949c102a18$var$Map {\n    constructor(selector, data, rateKey, colorThreshold, race, parent){\n        super(selector, {\n            rows: [\n                {\n                    rowHeader: \"Cash Bail Rate, black\",\n                    dataKey: \"black\",\n                    render: (value)=>(0, $ge6e3.toPercent)(value)\n                },\n                {\n                    rowHeader: \"Cash Bail Rate, white\",\n                    dataKey: \"white\",\n                    render: (value)=>(0, $ge6e3.toPercent)(value)\n                }\n            ]\n        });\n        this.data = data;\n        this.rateKey = rateKey;\n        this.race = race;\n        this.parent = parent;\n        this.colorThreshold = colorThreshold;\n        this.countyNameToBucket = {};\n    }\n    // Called by parent\n    _onMouseEnter(countyName, tooltipData) {\n        const nameAttributeSelector = `${(0, $4UL1w.COUNTY_NAME_ATTRIBUTE)}=\"${countyName}\"`;\n        const raceAttributeSelector = `data-race=\"${this.race}\"`;\n        const element = this.svg.select(`path[${nameAttributeSelector}][${raceAttributeSelector}]`).node();\n        this.svg.selectAll(`path:not([${nameAttributeSelector}])`).classed(\"faded\", true);\n        super.showTooltip(element, tooltipData);\n    }\n    _onMouseOut(countyName) {\n        super.onMouseOut();\n        this.svg.selectAll(`path:not([${(0, $4UL1w.COUNTY_NAME_ATTRIBUTE)}=\"${countyName}\"])`).classed(\"faded\", false);\n    }\n    resetHighlight() {\n        super.resetHighlight();\n        this.svg.selectAll(\"rect\").style(\"opacity\", \"1\");\n        this.svg.selectAll(\"text\").style(\"opacity\", \"1\");\n    }\n    onMouseEnter(event) {\n        this.parent.onChildMouseEnter(event);\n    }\n    onMouseOut(event) {\n        this.parent.onChildMouseOut(event);\n    }\n    getBucket(countyName) {\n        return Number(this.countyNameToBucket[countyName]);\n    }\n    createHatchPatterns(colors) {\n        new Set(colors).forEach((color)=>{\n            const pattern = this.svg.append(\"defs\").append(\"pattern\").attr(\"id\", `diagonalHatch${color.replace(\"#\", \"\")}`).attr(\"patternUnits\", \"userSpaceOnUse\").attr(\"patternTransform\", \"rotate(45 2 2)\").attr(\"width\", 4).attr(\"height\", 4);\n            pattern.append(\"rect\").attr(\"x\", 0).attr(\"y\", 0).attr(\"width\", 4).attr(\"height\", 4).attr(\"fill\", \"#303030\");\n            pattern.append(\"path\").attr(\"d\", \"M -1,2 l 6,0\").attr(\"stroke\", `${color}`).attr(\"stroke-width\", 1);\n        });\n    }\n    renderPA(features, path) {\n        const colors = [];\n        this.data.forEach((row)=>{\n            const countyName = row.name;\n            const cashBailRate = row[this.rateKey];\n            const feature = features.find((f)=>f.properties[\"NAME\"] === countyName);\n            feature.properties.rate = cashBailRate;\n            // assign color based on outlier status; add to array for pattern creation\n            const color = this.colorThreshold(cashBailRate);\n            feature.properties.color = row.outlier ? `url(#diagonalHatch${color.replace(\"#\", \"\")})` : color;\n            feature.properties.bucket = this.colorThreshold.invertExtent(color)[1];\n            this.countyNameToBucket[countyName] = feature.properties.bucket;\n            colors.push(color);\n        });\n        // create svg hatch patterns for each possible color\n        this.createHatchPatterns(colors);\n        const paths = super.renderPA(features, path);\n        paths.style(\"fill\", (feature)=>feature.properties.color).attr((0, $4UL1w.BUCKET_ATTRIBUTE), (feature)=>feature.properties.bucket).attr(\"data-rate\", (feature)=>feature.properties.rate).attr(\"data-race\", ()=>this.race);\n        this.renderCities();\n    }\n}\nclass $dd40b9949c102a18$export$8f762ceff330fdba {\n    constructor(id, data, averages){\n        const colorThreshold = (0, $ge6e3.getColorThreshold)((0, $4UL1w.BAIL_RATE_RACE_MAP_COLOR_CONFIG).domain, (0, $4UL1w.BAIL_RATE_RACE_MAP_COLOR_CONFIG).colors);\n        this.black = new $dd40b9949c102a18$var$BailRaceMap(`#${id} #black.map`, data, \"cashBailRateBlack\", colorThreshold, \"black\", this);\n        this.white = new $dd40b9949c102a18$var$BailRaceMap(`#${id} #white.map`, data, \"cashBailRateWhite\", colorThreshold, \"white\", this);\n        const onLegendMouseOver = (event)=>{\n            this.highlightBarFromLegend(event.target);\n            this.highlightMap(event.target);\n        };\n        const onLegendMouseOut = ()=>this.resetHighlight();\n        onLegendMouseOver.bind(this);\n        onLegendMouseOut.bind(this);\n        this.legend = new $dd40b9949c102a18$var$ColorScaleLegend(id, (0, $4UL1w.BAIL_RATE_RACE_MAP_COLOR_CONFIG).domain, colorThreshold, [\n            {\n                value: averages.white,\n                label: \"White\"\n            },\n            {\n                value: averages.black,\n                label: \"Black\"\n            }\n        ], onLegendMouseOver, onLegendMouseOut);\n        this.render();\n    }\n    getCountyRate(countyName, race) {\n        const element = document.querySelector(`path[${(0, $4UL1w.COUNTY_NAME_ATTRIBUTE)}=\"${countyName}\"][data-race=\"${race}\"]`);\n        return Number(element.getAttribute(\"data-rate\"));\n    }\n    onChildMouseEnter(event) {\n        const countyName = event.target.getAttribute((0, $4UL1w.COUNTY_NAME_ATTRIBUTE));\n        const tooltipData = {\n            name: countyName,\n            black: this.getCountyRate(countyName, \"black\"),\n            white: this.getCountyRate(countyName, \"white\")\n        };\n        this.black._onMouseEnter(countyName, tooltipData);\n        this.white._onMouseEnter(countyName, tooltipData);\n        this.highlightBarFromMap(event.target);\n    }\n    onChildMouseOut(event) {\n        const countyName = event.target.getAttribute((0, $4UL1w.COUNTY_NAME_ATTRIBUTE));\n        this.black._onMouseOut(countyName);\n        this.white._onMouseOut(countyName);\n        this.resetHighlight();\n    }\n    highlightBarFromLegend(element) {\n        const bucket = element.getAttribute((0, $4UL1w.BUCKET_ATTRIBUTE));\n        this.legend.highlightBars([\n            bucket\n        ]);\n    }\n    highlightBarFromMap(element) {\n        const countyName = element.getAttribute((0, $4UL1w.COUNTY_NAME_ATTRIBUTE));\n        const buckets = [\n            this.black.getBucket(countyName),\n            this.white.getBucket(countyName)\n        ];\n        this.legend.highlightBars(buckets);\n    }\n    highlightMap(element) {\n        this.black.highlightMap(element);\n        this.white.highlightMap(element);\n    }\n    resetHighlight() {\n        this.black.resetHighlight();\n        this.white.resetHighlight();\n        this.legend.resetHighlight();\n    }\n    render() {\n        this.legend.render();\n        this.black.render();\n        this.white.render();\n    }\n}\nclass $dd40b9949c102a18$export$8c49d322883a3053 {\n    constructor(leftMap, rightMap, container){\n        this.leftMap = leftMap;\n        this.rightMap = rightMap;\n        this.container = container;\n        // set up switch buttons\n        this.rightSwitch = container.getElementsByClassName(\"switch-container\")[0].getElementsByClassName(\"right\")[0];\n        this.rightSwitch.addEventListener(\"click\", this.showRightTable.bind(this));\n        this.leftSwitch = container.getElementsByClassName(\"switch-container\")[0].getElementsByClassName(\"left\")[0];\n        this.leftSwitch.addEventListener(\"click\", this.showLeftTable.bind(this));\n        // show left table by default\n        this.showLeftTable();\n    }\n    showLeftTable() {\n        const leftContainer = document.getElementById(this.leftMap.id);\n        const rightContainer = document.getElementById(this.rightMap.id);\n        leftContainer.style.display = \"block\";\n        rightContainer.style.display = \"none\";\n        this.leftSwitch.classList.add(\"showing\");\n        this.rightSwitch.classList.remove(\"showing\");\n    }\n    showRightTable() {\n        const leftContainer = document.getElementById(this.leftMap.id);\n        const rightContainer = document.getElementById(this.rightMap.id);\n        leftContainer.style.display = \"none\";\n        rightContainer.style.display = \"block\";\n        this.leftSwitch.classList.remove(\"showing\");\n        this.rightSwitch.classList.add(\"showing\");\n    }\n}\n\n});\nparcelRegister(\"f5Hsa\", function(module, exports) {\n\n$parcel$export(module.exports, \"feature\", () => (parcelRequire(\"9lyWK\")).default);\n\nvar $b0N39 = parcelRequire(\"b0N39\");\n\nvar $9lyWK = parcelRequire(\"9lyWK\");\n\nvar $fhE4c = parcelRequire(\"fhE4c\");\n\nvar $4A9tB = parcelRequire(\"4A9tB\");\n\nvar $5VqEe = parcelRequire(\"5VqEe\");\n\nvar $fFj8n = parcelRequire(\"fFj8n\");\n\nvar $k6zly = parcelRequire(\"k6zly\");\n\nvar $2QhEs = parcelRequire(\"2QhEs\");\n\n});\nparcelRegister(\"b0N39\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $8045be1669b35f90$export$2e2bcd8739ae039);\n\nvar $k6zly = parcelRequire(\"k6zly\");\nfunction $8045be1669b35f90$export$2e2bcd8739ae039(topology) {\n    var t = (0, $k6zly.default)(topology.transform), key, x0 = Infinity, y0 = x0, x1 = -x0, y1 = -x0;\n    function bboxPoint(p) {\n        p = t(p);\n        if (p[0] < x0) x0 = p[0];\n        if (p[0] > x1) x1 = p[0];\n        if (p[1] < y0) y0 = p[1];\n        if (p[1] > y1) y1 = p[1];\n    }\n    function bboxGeometry(o) {\n        switch(o.type){\n            case \"GeometryCollection\":\n                o.geometries.forEach(bboxGeometry);\n                break;\n            case \"Point\":\n                bboxPoint(o.coordinates);\n                break;\n            case \"MultiPoint\":\n                o.coordinates.forEach(bboxPoint);\n                break;\n        }\n    }\n    topology.arcs.forEach(function(arc) {\n        var i = -1, n = arc.length, p;\n        while(++i < n){\n            p = t(arc[i], i);\n            if (p[0] < x0) x0 = p[0];\n            if (p[0] > x1) x1 = p[0];\n            if (p[1] < y0) y0 = p[1];\n            if (p[1] > y1) y1 = p[1];\n        }\n    });\n    for(key in topology.objects)bboxGeometry(topology.objects[key]);\n    return [\n        x0,\n        y0,\n        x1,\n        y1\n    ];\n}\n\n});\nparcelRegister(\"k6zly\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $ea2fc94c04aa5385$export$2e2bcd8739ae039);\n\nvar $9nZjx = parcelRequire(\"9nZjx\");\nfunction $ea2fc94c04aa5385$export$2e2bcd8739ae039(transform) {\n    if (transform == null) return 0, $9nZjx.default;\n    var x0, y0, kx = transform.scale[0], ky = transform.scale[1], dx = transform.translate[0], dy = transform.translate[1];\n    return function(input, i) {\n        if (!i) x0 = y0 = 0;\n        var j = 2, n = input.length, output = new Array(n);\n        output[0] = (x0 += input[0]) * kx + dx;\n        output[1] = (y0 += input[1]) * ky + dy;\n        while(j < n)output[j] = input[j], ++j;\n        return output;\n    };\n}\n\n});\nparcelRegister(\"9nZjx\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $6d55d2c6180e495a$export$2e2bcd8739ae039);\nfunction $6d55d2c6180e495a$export$2e2bcd8739ae039(x) {\n    return x;\n}\n\n});\n\n\n\nparcelRegister(\"9lyWK\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $6ce12edae041358d$export$2e2bcd8739ae039);\n$parcel$export(module.exports, \"object\", () => $6ce12edae041358d$export$be5493f9613cbbe);\n\nvar $a90ji = parcelRequire(\"a90ji\");\n\nvar $k6zly = parcelRequire(\"k6zly\");\nfunction $6ce12edae041358d$export$2e2bcd8739ae039(topology, o) {\n    if (typeof o === \"string\") o = topology.objects[o];\n    return o.type === \"GeometryCollection\" ? {\n        type: \"FeatureCollection\",\n        features: o.geometries.map(function(o) {\n            return $6ce12edae041358d$var$feature(topology, o);\n        })\n    } : $6ce12edae041358d$var$feature(topology, o);\n}\nfunction $6ce12edae041358d$var$feature(topology, o) {\n    var id = o.id, bbox = o.bbox, properties = o.properties == null ? {} : o.properties, geometry = $6ce12edae041358d$export$be5493f9613cbbe(topology, o);\n    return id == null && bbox == null ? {\n        type: \"Feature\",\n        properties: properties,\n        geometry: geometry\n    } : bbox == null ? {\n        type: \"Feature\",\n        id: id,\n        properties: properties,\n        geometry: geometry\n    } : {\n        type: \"Feature\",\n        id: id,\n        bbox: bbox,\n        properties: properties,\n        geometry: geometry\n    };\n}\nfunction $6ce12edae041358d$export$be5493f9613cbbe(topology, o) {\n    var transformPoint = (0, $k6zly.default)(topology.transform), arcs = topology.arcs;\n    function arc(i, points) {\n        if (points.length) points.pop();\n        for(var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k)points.push(transformPoint(a[k], k));\n        if (i < 0) (0, $a90ji.default)(points, n);\n    }\n    function point(p) {\n        return transformPoint(p);\n    }\n    function line(arcs) {\n        var points = [];\n        for(var i = 0, n = arcs.length; i < n; ++i)arc(arcs[i], points);\n        if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n        return points;\n    }\n    function ring(arcs) {\n        var points = line(arcs);\n        while(points.length < 4)points.push(points[0]); // This may happen if an arc has only two points.\n        return points;\n    }\n    function polygon(arcs) {\n        return arcs.map(ring);\n    }\n    function geometry(o) {\n        var type = o.type, coordinates;\n        switch(type){\n            case \"GeometryCollection\":\n                return {\n                    type: type,\n                    geometries: o.geometries.map(geometry)\n                };\n            case \"Point\":\n                coordinates = point(o.coordinates);\n                break;\n            case \"MultiPoint\":\n                coordinates = o.coordinates.map(point);\n                break;\n            case \"LineString\":\n                coordinates = line(o.arcs);\n                break;\n            case \"MultiLineString\":\n                coordinates = o.arcs.map(line);\n                break;\n            case \"Polygon\":\n                coordinates = polygon(o.arcs);\n                break;\n            case \"MultiPolygon\":\n                coordinates = o.arcs.map(polygon);\n                break;\n            default:\n                return null;\n        }\n        return {\n            type: type,\n            coordinates: coordinates\n        };\n    }\n    return geometry(o);\n}\n\n});\nparcelRegister(\"a90ji\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $762afc43b78022d9$export$2e2bcd8739ae039);\nfunction $762afc43b78022d9$export$2e2bcd8739ae039(array, n) {\n    var t, j = array.length, i = j - n;\n    while(i < --j)t = array[i], array[i++] = array[j], array[j] = t;\n}\n\n});\n\n\nparcelRegister(\"fhE4c\", function(module, exports) {\n\nvar $9lyWK = parcelRequire(\"9lyWK\");\n\nvar $cjinv = parcelRequire(\"cjinv\");\nfunction $b20785f1173f6842$export$2e2bcd8739ae039(topology) {\n    return (0, $9lyWK.object)(topology, $b20785f1173f6842$export$fc3815c78e52e7d6.apply(this, arguments));\n}\nfunction $b20785f1173f6842$export$fc3815c78e52e7d6(topology, object, filter) {\n    var arcs, i, n;\n    if (arguments.length > 1) arcs = $b20785f1173f6842$var$extractArcs(topology, object, filter);\n    else for(i = 0, arcs = new Array(n = topology.arcs.length); i < n; ++i)arcs[i] = i;\n    return {\n        type: \"MultiLineString\",\n        arcs: (0, $cjinv.default)(topology, arcs)\n    };\n}\nfunction $b20785f1173f6842$var$extractArcs(topology, object, filter) {\n    var arcs = [], geomsByArc = [], geom;\n    function extract0(i) {\n        var j = i < 0 ? ~i : i;\n        (geomsByArc[j] || (geomsByArc[j] = [])).push({\n            i: i,\n            g: geom\n        });\n    }\n    function extract1(arcs) {\n        arcs.forEach(extract0);\n    }\n    function extract2(arcs) {\n        arcs.forEach(extract1);\n    }\n    function extract3(arcs) {\n        arcs.forEach(extract2);\n    }\n    function geometry(o) {\n        switch(geom = o, o.type){\n            case \"GeometryCollection\":\n                o.geometries.forEach(geometry);\n                break;\n            case \"LineString\":\n                extract1(o.arcs);\n                break;\n            case \"MultiLineString\":\n            case \"Polygon\":\n                extract2(o.arcs);\n                break;\n            case \"MultiPolygon\":\n                extract3(o.arcs);\n                break;\n        }\n    }\n    geometry(object);\n    geomsByArc.forEach(filter == null ? function(geoms) {\n        arcs.push(geoms[0].i);\n    } : function(geoms) {\n        if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i);\n    });\n    return arcs;\n}\n\n});\nparcelRegister(\"cjinv\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $8f6583df6ba62f85$export$2e2bcd8739ae039);\nfunction $8f6583df6ba62f85$export$2e2bcd8739ae039(topology, arcs) {\n    var stitchedArcs = {}, fragmentByStart = {}, fragmentByEnd = {}, fragments = [], emptyIndex = -1;\n    // Stitch empty arcs first, since they may be subsumed by other arcs.\n    arcs.forEach(function(i, j) {\n        var arc = topology.arcs[i < 0 ? ~i : i], t;\n        if (arc.length < 3 && !arc[1][0] && !arc[1][1]) t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n    });\n    arcs.forEach(function(i) {\n        var e = ends(i), start = e[0], end = e[1], f, g;\n        if (f = fragmentByEnd[start]) {\n            delete fragmentByEnd[f.end];\n            f.push(i);\n            f.end = end;\n            if (g = fragmentByStart[end]) {\n                delete fragmentByStart[g.start];\n                var fg = g === f ? f : f.concat(g);\n                fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n            } else fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n        } else if (f = fragmentByStart[end]) {\n            delete fragmentByStart[f.start];\n            f.unshift(i);\n            f.start = start;\n            if (g = fragmentByEnd[start]) {\n                delete fragmentByEnd[g.end];\n                var gf = g === f ? f : g.concat(f);\n                fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n            } else fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n        } else {\n            f = [\n                i\n            ];\n            fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n        }\n    });\n    function ends(i) {\n        var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n        if (topology.transform) p1 = [\n            0,\n            0\n        ], arc.forEach(function(dp) {\n            p1[0] += dp[0], p1[1] += dp[1];\n        });\n        else p1 = arc[arc.length - 1];\n        return i < 0 ? [\n            p1,\n            p0\n        ] : [\n            p0,\n            p1\n        ];\n    }\n    function flush(fragmentByEnd, fragmentByStart) {\n        for(var k in fragmentByEnd){\n            var f = fragmentByEnd[k];\n            delete fragmentByStart[f.start];\n            delete f.start;\n            delete f.end;\n            f.forEach(function(i) {\n                stitchedArcs[i < 0 ? ~i : i] = 1;\n            });\n            fragments.push(f);\n        }\n    }\n    flush(fragmentByEnd, fragmentByStart);\n    flush(fragmentByStart, fragmentByEnd);\n    arcs.forEach(function(i) {\n        if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([\n            i\n        ]);\n    });\n    return fragments;\n}\n\n});\n\n\nparcelRegister(\"4A9tB\", function(module, exports) {\n\nvar $9lyWK = parcelRequire(\"9lyWK\");\n\nvar $cjinv = parcelRequire(\"cjinv\");\nfunction $3561e00894e439fd$var$planarRingArea(ring) {\n    var i = -1, n = ring.length, a, b = ring[n - 1], area = 0;\n    while(++i < n)a = b, b = ring[i], area += a[0] * b[1] - a[1] * b[0];\n    return Math.abs(area); // Note: doubled area!\n}\nfunction $3561e00894e439fd$export$2e2bcd8739ae039(topology) {\n    return (0, $9lyWK.object)(topology, $3561e00894e439fd$export$fa52272cf7935962.apply(this, arguments));\n}\nfunction $3561e00894e439fd$export$fa52272cf7935962(topology, objects) {\n    var polygonsByArc = {}, polygons = [], groups = [];\n    objects.forEach(geometry);\n    function geometry(o) {\n        switch(o.type){\n            case \"GeometryCollection\":\n                o.geometries.forEach(geometry);\n                break;\n            case \"Polygon\":\n                extract(o.arcs);\n                break;\n            case \"MultiPolygon\":\n                o.arcs.forEach(extract);\n                break;\n        }\n    }\n    function extract(polygon) {\n        polygon.forEach(function(ring) {\n            ring.forEach(function(arc) {\n                (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n            });\n        });\n        polygons.push(polygon);\n    }\n    function area(ring) {\n        return $3561e00894e439fd$var$planarRingArea((0, $9lyWK.object)(topology, {\n            type: \"Polygon\",\n            arcs: [\n                ring\n            ]\n        }).coordinates[0]);\n    }\n    polygons.forEach(function(polygon) {\n        if (!polygon._) {\n            var group = [], neighbors = [\n                polygon\n            ];\n            polygon._ = 1;\n            groups.push(group);\n            while(polygon = neighbors.pop()){\n                group.push(polygon);\n                polygon.forEach(function(ring) {\n                    ring.forEach(function(arc) {\n                        polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n                            if (!polygon._) {\n                                polygon._ = 1;\n                                neighbors.push(polygon);\n                            }\n                        });\n                    });\n                });\n            }\n        }\n    });\n    polygons.forEach(function(polygon) {\n        delete polygon._;\n    });\n    return {\n        type: \"MultiPolygon\",\n        arcs: groups.map(function(polygons) {\n            var arcs = [], n;\n            // Extract the exterior (unique) arcs.\n            polygons.forEach(function(polygon) {\n                polygon.forEach(function(ring) {\n                    ring.forEach(function(arc) {\n                        if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) arcs.push(arc);\n                    });\n                });\n            });\n            // Stitch the arcs into one or more rings.\n            arcs = (0, $cjinv.default)(topology, arcs);\n            // If more than one ring is returned,\n            // at most one of these rings can be the exterior;\n            // choose the one with the greatest absolute area.\n            if ((n = arcs.length) > 1) {\n                for(var i = 1, k = area(arcs[0]), ki, t; i < n; ++i)if ((ki = area(arcs[i])) > k) t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n            }\n            return arcs;\n        }).filter(function(arcs) {\n            return arcs.length > 0;\n        })\n    };\n}\n\n});\n\nparcelRegister(\"5VqEe\", function(module, exports) {\n\nvar $8s7Ph = parcelRequire(\"8s7Ph\");\nfunction $4506f25a28912a0c$export$2e2bcd8739ae039(objects) {\n    var indexesByArc = {}, neighbors = objects.map(function() {\n        return [];\n    });\n    function line(arcs, i) {\n        arcs.forEach(function(a) {\n            if (a < 0) a = ~a;\n            var o = indexesByArc[a];\n            if (o) o.push(i);\n            else indexesByArc[a] = [\n                i\n            ];\n        });\n    }\n    function polygon(arcs, i) {\n        arcs.forEach(function(arc) {\n            line(arc, i);\n        });\n    }\n    function geometry(o, i) {\n        if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) {\n            geometry(o, i);\n        });\n        else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n    }\n    var geometryType = {\n        LineString: line,\n        MultiLineString: polygon,\n        Polygon: polygon,\n        MultiPolygon: function(arcs, i) {\n            arcs.forEach(function(arc) {\n                polygon(arc, i);\n            });\n        }\n    };\n    objects.forEach(geometry);\n    for(var i in indexesByArc){\n        for(var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j)for(var k = j + 1; k < m; ++k){\n            var ij = indexes[j], ik = indexes[k], n;\n            if ((n = neighbors[ij])[i = (0, $8s7Ph.default)(n, ik)] !== ik) n.splice(i, 0, ik);\n            if ((n = neighbors[ik])[i = (0, $8s7Ph.default)(n, ij)] !== ij) n.splice(i, 0, ij);\n        }\n    }\n    return neighbors;\n}\n\n});\nparcelRegister(\"8s7Ph\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $6277025897c99170$export$2e2bcd8739ae039);\nfunction $6277025897c99170$export$2e2bcd8739ae039(a, x) {\n    var lo = 0, hi = a.length;\n    while(lo < hi){\n        var mid = lo + hi >>> 1;\n        if (a[mid] < x) lo = mid + 1;\n        else hi = mid;\n    }\n    return lo;\n}\n\n});\n\n\nparcelRegister(\"fFj8n\", function(module, exports) {\n\nvar $b0N39 = parcelRequire(\"b0N39\");\n\nvar $2QhEs = parcelRequire(\"2QhEs\");\nfunction $b67986fd24b10a61$export$2e2bcd8739ae039(topology, transform) {\n    if (topology.transform) throw new Error(\"already quantized\");\n    if (!transform || !transform.scale) {\n        if (!((n = Math.floor(transform)) >= 2)) throw new Error(\"n must be \\u22652\");\n        box = topology.bbox || (0, $b0N39.default)(topology);\n        var x0 = box[0], y0 = box[1], x1 = box[2], y1 = box[3], n;\n        transform = {\n            scale: [\n                x1 - x0 ? (x1 - x0) / (n - 1) : 1,\n                y1 - y0 ? (y1 - y0) / (n - 1) : 1\n            ],\n            translate: [\n                x0,\n                y0\n            ]\n        };\n    } else box = topology.bbox;\n    var t = (0, $2QhEs.default)(transform), box, key, inputs = topology.objects, outputs = {};\n    function quantizePoint(point) {\n        return t(point);\n    }\n    function quantizeGeometry(input) {\n        var output;\n        switch(input.type){\n            case \"GeometryCollection\":\n                output = {\n                    type: \"GeometryCollection\",\n                    geometries: input.geometries.map(quantizeGeometry)\n                };\n                break;\n            case \"Point\":\n                output = {\n                    type: \"Point\",\n                    coordinates: quantizePoint(input.coordinates)\n                };\n                break;\n            case \"MultiPoint\":\n                output = {\n                    type: \"MultiPoint\",\n                    coordinates: input.coordinates.map(quantizePoint)\n                };\n                break;\n            default:\n                return input;\n        }\n        if (input.id != null) output.id = input.id;\n        if (input.bbox != null) output.bbox = input.bbox;\n        if (input.properties != null) output.properties = input.properties;\n        return output;\n    }\n    function quantizeArc(input) {\n        var i = 0, j = 1, n = input.length, p, output = new Array(n); // pessimistic\n        output[0] = t(input[0], 0);\n        while(++i < n)if ((p = t(input[i], i))[0] || p[1]) output[j++] = p; // non-coincident points\n        if (j === 1) output[j++] = [\n            0,\n            0\n        ]; // an arc must have at least two points\n        output.length = j;\n        return output;\n    }\n    for(key in inputs)outputs[key] = quantizeGeometry(inputs[key]);\n    return {\n        type: \"Topology\",\n        bbox: box,\n        transform: transform,\n        objects: outputs,\n        arcs: topology.arcs.map(quantizeArc)\n    };\n}\n\n});\nparcelRegister(\"2QhEs\", function(module, exports) {\n\n$parcel$export(module.exports, \"default\", () => $211e21570c070783$export$2e2bcd8739ae039);\n\nvar $9nZjx = parcelRequire(\"9nZjx\");\nfunction $211e21570c070783$export$2e2bcd8739ae039(transform) {\n    if (transform == null) return 0, $9nZjx.default;\n    var x0, y0, kx = transform.scale[0], ky = transform.scale[1], dx = transform.translate[0], dy = transform.translate[1];\n    return function(input, i) {\n        if (!i) x0 = y0 = 0;\n        var j = 2, n = input.length, output = new Array(n), x1 = Math.round((input[0] - dx) / kx), y1 = Math.round((input[1] - dy) / ky);\n        output[0] = x1 - x0, x0 = x1;\n        output[1] = y1 - y0, y0 = y1;\n        while(j < n)output[j] = input[j], ++j;\n        return output;\n    };\n}\n\n});\n\n\n\n\n\n//# sourceMappingURL=bail-trends.5c6db565.js.map\n","import * as d3 from \"d3\";\r\nimport { feature } from \"topojson-client\";\r\nimport { COUNTY_MAP_DATA } from \"../raw-data.js\";\r\nimport { configureTooltip } from \"./Tooltip\";\r\nimport { getColorThreshold, toPercent, getPercentOffset } from \"../helpers\";\r\nimport {\r\n  DEFAULT_MAP_WIDTH,\r\n  DEFAULT_MAP_HEIGHT,\r\n  COUNTY_NAME_ATTRIBUTE,\r\n  BUCKET_ATTRIBUTE,\r\n  BAIL_RATE_MAP_COLOR_CONFIG,\r\n  BAIL_RATE_RACE_MAP_COLOR_CONFIG\r\n} from \"../constants\";\r\n\r\nclass ColorScaleLegend {\r\n  constructor(\r\n    id,\r\n    labels,\r\n    colorThreshold,\r\n    averages,\r\n    onMouseOver,\r\n    onMouseOut,\r\n    title = \"\",\r\n    offsetY = 35\r\n  ) {\r\n    this.labels = labels;\r\n    this.colorThreshold = colorThreshold;\r\n    this.averages = averages;\r\n    this.title = title;\r\n    this.onMouseOver = onMouseOver;\r\n    this.onMouseOut = onMouseOut;\r\n\r\n    // SVG viewbox width matches CSS width to avoid scaling/zoom\r\n    const element = document.querySelector(`#${id} .color-scale-legend`);\r\n    const svgWidth = Number(\r\n      getComputedStyle(element).width.replace(/[^\\d.]/g, \"\")\r\n    );\r\n\r\n    this.legendWidth = svgWidth - 30;\r\n    this.sectionWidth = this.legendWidth / (labels.length - 1);\r\n    this.sectionHeight = 10;\r\n    this.offsetX = 10;\r\n    this.offsetY = offsetY;\r\n    this.labelOffsetX = this.offsetX - 9;\r\n    this.labelOffsetY = this.offsetY + 28;\r\n\r\n    const svgHeight = this.sectionHeight + this.labelOffsetY + 10;\r\n    this.svg = d3\r\n      .select(`#${id} .color-scale-legend`)\r\n      .append(\"svg\")\r\n      .attr(\"viewBox\", `0 0 ${svgWidth} ${svgHeight}`);\r\n  }\r\n\r\n  highlightBars(buckets) {\r\n    // darken all legend bars\r\n    this.svg.selectAll(\".legend-bar\").style(\"opacity\", \"0.2\");\r\n    // darken all legend labels\r\n    this.svg.selectAll(\".legend-text\").style(\"opacity\", \"0.4\");\r\n    // highlight desired legend bars\r\n    buckets.forEach((bucket) => {\r\n      this.svg\r\n        .selectAll(`.legend-bar[${BUCKET_ATTRIBUTE}=\"${bucket}\"]`)\r\n        .style(\"opacity\", \"1\");\r\n      this.svg\r\n        .selectAll(`.legend-text[${BUCKET_ATTRIBUTE}*=\"${bucket}\"]`)\r\n        .style(\"opacity\", \"1\");\r\n    });\r\n  }\r\n\r\n  resetHighlight() {\r\n    this.svg.selectAll(\".legend-bar\").style(\"opacity\", \"1\");\r\n    this.svg.selectAll(\".legend-text\").style(\"opacity\", \"1\");\r\n  }\r\n\r\n  render() {\r\n    const legend = this.svg\r\n      .selectAll(\"g\")\r\n      .data(this.labels.slice(0, this.labels.length - 1))\r\n      .enter()\r\n      .append(\"g\")\r\n      .attr(\"data-label\", (d) => d);\r\n    // Add colored bars\r\n    legend\r\n      .append(\"rect\")\r\n      .attr(\"class\", \"legend-bar\")\r\n      .attr(\"x\", (_, i) => this.offsetX + i * this.sectionWidth)\r\n      .attr(\"y\", this.offsetY)\r\n      .attr(\"width\", this.sectionWidth)\r\n      .attr(\"height\", this.sectionHeight)\r\n      .attr(BUCKET_ATTRIBUTE, (_, i) => this.labels[i + 1])\r\n      .style(\"fill\", (d) => this.colorThreshold(d))\r\n      .on(\"mouseover\", (event) => this.onMouseOver(event))\r\n      .on(\"mouseout\", () => this.onMouseOut());\r\n    // Add labels\r\n    const legendTextClassName = \"legend-text\";\r\n    const smallLabelOffset = (i) =>\r\n      this.labels[i].toString().length < 2 ? 2 : 0;\r\n    legend\r\n      .append(\"text\")\r\n      .attr(\r\n        \"x\",\r\n        (_, i) =>\r\n          this.labelOffsetX + i * this.sectionWidth + smallLabelOffset(i)\r\n      )\r\n      .attr(\"y\", this.labelOffsetY)\r\n      .attr(\"class\", legendTextClassName)\r\n      .attr(BUCKET_ATTRIBUTE, (d) => {\r\n        const color = this.colorThreshold(d);\r\n        const [start, end] = this.colorThreshold.invertExtent(color);\r\n        return `${start}-${end}`;\r\n      })\r\n      .text((_, i) => i === 0 ? \"\" : toPercent(this.labels[i], 0, false));\r\n    // Set up average label\r\n    const maxValue = this.labels[this.labels.length - 1];\r\n    this.averages.forEach((avg) => {\r\n      const position = getPercentOffset(avg.value, this.labels[0], maxValue);\r\n      const avgOffsetX = this.offsetX + this.legendWidth * position / 100;\r\n      const legendLineClassName = \"legend-avg-line\";\r\n      this.svg\r\n        .append(\"line\")\r\n        .attr(\"x1\", avgOffsetX)\r\n        .attr(\"x2\", avgOffsetX)\r\n        .attr(\"y1\", this.offsetY + 10)\r\n        .attr(\"y2\", this.offsetY - 5)\r\n        .attr(\"class\", legendLineClassName);\r\n      this.svg\r\n        .append(\"text\")\r\n        .attr(\"x\", avgOffsetX - 13)\r\n        .attr(\"y\", this.offsetY - 25)\r\n        .attr(\"class\", legendTextClassName)\r\n        .text(avg.label);\r\n      this.svg\r\n        .append(\"text\")\r\n        .attr(\"x\", avgOffsetX - 15)\r\n        .attr(\"y\", this.offsetY - 10)\r\n        .attr(\"class\", legendTextClassName)\r\n        .text(toPercent(avg.value));\r\n      // Add title, if any\r\n      this.svg\r\n        .append(\"text\")\r\n        .attr(\"x\", this.legendWidth / 2 - 45)\r\n        .attr(\"y\", this.offsetY + 45)\r\n        .attr(\"class\", legendTextClassName)\r\n        .text(this.title);\r\n    });\r\n  }\r\n}\r\n\r\nclass Map {\r\n  constructor(selector, tooltipSchema = {}) {\r\n    this.svg = d3\r\n      .select(selector)\r\n      .append(\"svg\")\r\n      .attr(\"viewBox\", `0 0 ${DEFAULT_MAP_WIDTH} ${DEFAULT_MAP_HEIGHT}`);\r\n\r\n    this.projection = d3.geoMercator().scale(5500).center([-75.75, 40.5]);\r\n\r\n    this.renderTooltip = configureTooltip({\r\n      ...tooltipSchema,\r\n      placement: \"top\"\r\n    });\r\n  }\r\n\r\n  renderCity(name, coords, labelCoords) {\r\n    this.svg\r\n      .append(\"circle\")\r\n      .attr(\"transform\", `translate(${this.projection(coords)})`)\r\n      .attr(\"r\", 4)\r\n      .attr(\"class\", \"city-label-dot\")\r\n      .attr(\"fill\", \"white\");\r\n    this.svg\r\n      .append(\"text\")\r\n      .attr(\"transform\", `translate(${this.projection(labelCoords)})`)\r\n      .attr(\"class\", \"city-label\")\r\n      .text(name);\r\n  }\r\n\r\n  renderCities() {\r\n    this.renderCity(\"Philadelphia\", [-75.1652, 39.9526], [-75.6, 40.06]);\r\n    this.renderCity(\"Harrisburg\", [-76.8867, 40.2732], [-77.15, 40.375]);\r\n    this.renderCity(\"Pittsburgh\", [-79.9959, 40.4406], [-80.25, 40.3]);\r\n  }\r\n\r\n  renderPA(features, path) {\r\n    return this.svg\r\n      .append(\"g\")\r\n      .attr(\"class\", \"county\")\r\n      .selectAll(\"path\")\r\n      .data(features)\r\n      .enter()\r\n      .append(\"path\")\r\n      .attr(\"d\", path)\r\n      .attr(\"class\", \"county-path\")\r\n      .attr(COUNTY_NAME_ATTRIBUTE, (feature) => feature.properties[\"NAME\"])\r\n      .on(\"mouseenter focus\", this.onMouseEnter.bind(this))\r\n      .on(\"mouseout\", this.onMouseOut.bind(this));\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.showTooltip(event.target, {});\r\n  }\r\n\r\n  onMouseOut() {\r\n    this.hideTooltip();\r\n  }\r\n\r\n  showTooltip(element, data) {\r\n    this.tooltip = this.renderTooltip(element, [data], data.name);\r\n    this.tooltip.show();\r\n  }\r\n\r\n  hideTooltip() {\r\n    if (this.tooltip) {\r\n      this.tooltip.hide();\r\n      this.tooltip.destroy();\r\n    }\r\n  }\r\n\r\n  highlightMap(element) {\r\n    const bucket = element.getAttribute(BUCKET_ATTRIBUTE);\r\n    const attributeSelector = `${BUCKET_ATTRIBUTE}=\"${bucket}\"`;\r\n    this.svg\r\n      .selectAll(`path:not([${attributeSelector}])`)\r\n      .classed(\"faded\", true);\r\n  }\r\n\r\n  resetHighlight() {\r\n    this.svg.selectAll(\"path\").classed(\"faded\", false);\r\n  }\r\n\r\n  render() {\r\n    const path = d3.geoPath().projection(this.projection);\r\n\r\n    const countyTopoJson = JSON.parse(JSON.stringify(COUNTY_MAP_DATA));\r\n    const features = feature(\r\n      countyTopoJson,\r\n      countyTopoJson.objects[\"pa_counties\"]\r\n    ).features;\r\n\r\n    this.renderPA(features, path);\r\n  }\r\n}\r\n\r\nexport class BailRateMap extends Map {\r\n  constructor(id, data, rateKey, average, tooltipHeader) {\r\n    super(`#${id} .map`, {\r\n      rows: [\r\n        {\r\n          rowHeader: tooltipHeader,\r\n          dataKey: \"x\",\r\n          render: (value) => toPercent(value)\r\n        }\r\n      ]\r\n    });\r\n    this.id = id;\r\n    this.data = data;\r\n    this.rateKey = rateKey;\r\n\r\n    this.colorThreshold = getColorThreshold(\r\n      BAIL_RATE_MAP_COLOR_CONFIG.domain,\r\n      BAIL_RATE_MAP_COLOR_CONFIG.colors\r\n    );\r\n\r\n    const onLegendMouseOver = (event) => {\r\n      this.highlightBar(event.target);\r\n      this.highlightMap(event.target);\r\n    };\r\n    const onLegendMouseOut = () => this.resetHighlight();\r\n    onLegendMouseOver.bind(this);\r\n    onLegendMouseOut.bind(this);\r\n\r\n    this.legend = new ColorScaleLegend(\r\n      id,\r\n      BAIL_RATE_MAP_COLOR_CONFIG.domain,\r\n      this.colorThreshold,\r\n      [\r\n        {\r\n          value: average,\r\n          label: \"Avg\"\r\n        }\r\n      ],\r\n      onLegendMouseOver,\r\n      onLegendMouseOut\r\n    );\r\n\r\n    this.render();\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    const countyName = event.target.getAttribute(COUNTY_NAME_ATTRIBUTE);\r\n    const attributeSelector = `${COUNTY_NAME_ATTRIBUTE}=\"${countyName}\"`;\r\n    super.onMouseEnter(event);\r\n    this.svg\r\n      .selectAll(`path:not([${attributeSelector}])`)\r\n      .classed(\"faded\", true);\r\n    this.highlightBar(event.target);\r\n  }\r\n\r\n  onMouseOut(event) {\r\n    super.onMouseOut(event);\r\n    this.resetHighlight();\r\n  }\r\n\r\n  showTooltip(element) {\r\n    const countyName = element.getAttribute(COUNTY_NAME_ATTRIBUTE);\r\n    const countyRate = Number(element.getAttribute(\"data-rate\"));\r\n    super.showTooltip(element, { name: countyName, x: countyRate });\r\n  }\r\n\r\n  highlightBar(element) {\r\n    const bucket = Number(element.getAttribute(BUCKET_ATTRIBUTE));\r\n    this.legend.highlightBars([bucket]);\r\n  }\r\n\r\n  resetHighlight() {\r\n    super.resetHighlight();\r\n    this.legend.resetHighlight();\r\n  }\r\n\r\n  renderPA(features, path) {\r\n    this.data.forEach((row) => {\r\n      const countyName = row.name;\r\n      const cashBailRate = row[this.rateKey];\r\n      const feature = features.find((f) => f.properties[\"NAME\"] === countyName);\r\n      feature.properties.rate = cashBailRate;\r\n      feature.properties.color = this.colorThreshold(cashBailRate);\r\n      feature.properties.bucket = this.colorThreshold.invertExtent(\r\n        feature.properties.color\r\n      )[1];\r\n    });\r\n    const paths = super.renderPA(features, path);\r\n    paths\r\n      .style(\"fill\", (feature) => feature.properties.color)\r\n      .attr(BUCKET_ATTRIBUTE, (feature) => feature.properties.bucket)\r\n      .attr(\"data-rate\", (feature) => feature.properties.rate);\r\n\r\n    this.legend.render();\r\n\r\n    this.renderCities();\r\n  }\r\n}\r\n\r\nclass BailRaceMap extends Map {\r\n  constructor(selector, data, rateKey, colorThreshold, race, parent) {\r\n    super(selector, {\r\n      rows: [\r\n        {\r\n          rowHeader: \"Cash Bail Rate, black\",\r\n          dataKey: \"black\",\r\n          render: (value) => toPercent(value)\r\n        },\r\n        {\r\n          rowHeader: \"Cash Bail Rate, white\",\r\n          dataKey: \"white\",\r\n          render: (value) => toPercent(value)\r\n        }\r\n      ]\r\n    });\r\n    this.data = data;\r\n    this.rateKey = rateKey;\r\n    this.race = race;\r\n    this.parent = parent;\r\n    this.colorThreshold = colorThreshold;\r\n    this.countyNameToBucket = {};\r\n  }\r\n\r\n  // Called by parent\r\n  _onMouseEnter(countyName, tooltipData) {\r\n    const nameAttributeSelector = `${COUNTY_NAME_ATTRIBUTE}=\"${countyName}\"`;\r\n    const raceAttributeSelector = `data-race=\"${this.race}\"`;\r\n    const element = this.svg\r\n      .select(`path[${nameAttributeSelector}][${raceAttributeSelector}]`)\r\n      .node();\r\n\r\n    this.svg\r\n      .selectAll(`path:not([${nameAttributeSelector}])`)\r\n      .classed(\"faded\", true);\r\n    super.showTooltip(element, tooltipData);\r\n  }\r\n\r\n  _onMouseOut(countyName) {\r\n    super.onMouseOut();\r\n    this.svg\r\n      .selectAll(`path:not([${COUNTY_NAME_ATTRIBUTE}=\"${countyName}\"])`)\r\n      .classed(\"faded\", false);\r\n  }\r\n\r\n  resetHighlight() {\r\n    super.resetHighlight();\r\n    this.svg.selectAll(\"rect\").style(\"opacity\", \"1\");\r\n    this.svg.selectAll(\"text\").style(\"opacity\", \"1\");\r\n  }\r\n\r\n  onMouseEnter(event) {\r\n    this.parent.onChildMouseEnter(event);\r\n  }\r\n\r\n  onMouseOut(event) {\r\n    this.parent.onChildMouseOut(event);\r\n  }\r\n\r\n  getBucket(countyName) {\r\n    return Number(this.countyNameToBucket[countyName]);\r\n  }\r\n\r\n  createHatchPatterns(colors) {\r\n    new Set(colors).forEach((color) => {\r\n      const pattern = this.svg\r\n        .append(\"defs\")\r\n        .append(\"pattern\")\r\n          .attr(\"id\", `diagonalHatch${color.replace(\"#\", \"\")}`)\r\n          .attr(\"patternUnits\", \"userSpaceOnUse\")\r\n          .attr(\"patternTransform\", \"rotate(45 2 2)\")\r\n          .attr(\"width\", 4)\r\n          .attr(\"height\", 4);\r\n      pattern.append(\"rect\")\r\n        .attr(\"x\", 0)\r\n        .attr(\"y\", 0)\r\n        .attr(\"width\", 4)\r\n        .attr(\"height\", 4)\r\n        .attr(\"fill\", \"#303030\");\r\n      pattern.append(\"path\")\r\n        .attr(\"d\", \"M -1,2 l 6,0\")\r\n        .attr(\"stroke\", `${color}`)\r\n        .attr(\"stroke-width\", 1);\r\n    });\r\n  }\r\n\r\n  renderPA(features, path) {\r\n    const colors = [];\r\n    this.data.forEach((row) => {\r\n      const countyName = row.name;\r\n      const cashBailRate = row[this.rateKey];\r\n      const feature = features.find((f) => f.properties[\"NAME\"] === countyName);\r\n      feature.properties.rate = cashBailRate;\r\n      // assign color based on outlier status; add to array for pattern creation\r\n      const color = this.colorThreshold(cashBailRate);\r\n      feature.properties.color =\r\n        row.outlier ? `url(#diagonalHatch${color.replace(\"#\", \"\")})` : color;\r\n      feature.properties.bucket = this.colorThreshold.invertExtent(color)[1];\r\n      this.countyNameToBucket[countyName] = feature.properties.bucket;\r\n      colors.push(color);\r\n    });\r\n    // create svg hatch patterns for each possible color\r\n    this.createHatchPatterns(colors);\r\n    const paths = super.renderPA(features, path);\r\n    paths\r\n      .style(\"fill\", (feature) => feature.properties.color)\r\n      .attr(BUCKET_ATTRIBUTE, (feature) => feature.properties.bucket)\r\n      .attr(\"data-rate\", (feature) => feature.properties.rate)\r\n      .attr(\"data-race\", () => this.race);\r\n\r\n    this.renderCities();\r\n  }\r\n}\r\n\r\nexport class RaceMapContainer {\r\n  constructor(id, data, averages) {\r\n    const colorThreshold = getColorThreshold(\r\n      BAIL_RATE_RACE_MAP_COLOR_CONFIG.domain,\r\n      BAIL_RATE_RACE_MAP_COLOR_CONFIG.colors\r\n    );\r\n\r\n    this.black = new BailRaceMap(\r\n      `#${id} #black.map`,\r\n      data,\r\n      \"cashBailRateBlack\",\r\n      colorThreshold,\r\n      \"black\",\r\n      this\r\n    );\r\n    this.white = new BailRaceMap(\r\n      `#${id} #white.map`,\r\n      data,\r\n      \"cashBailRateWhite\",\r\n      colorThreshold,\r\n      \"white\",\r\n      this\r\n    );\r\n\r\n    const onLegendMouseOver = (event) => {\r\n      this.highlightBarFromLegend(event.target);\r\n      this.highlightMap(event.target);\r\n    };\r\n    const onLegendMouseOut = () => this.resetHighlight();\r\n    onLegendMouseOver.bind(this);\r\n    onLegendMouseOut.bind(this);\r\n\r\n    this.legend = new ColorScaleLegend(\r\n      id,\r\n      BAIL_RATE_RACE_MAP_COLOR_CONFIG.domain,\r\n      colorThreshold,\r\n      [\r\n        {\r\n          value: averages.white,\r\n          label: \"White\"\r\n        },\r\n        {\r\n          value: averages.black,\r\n          label: \"Black\"\r\n        }\r\n      ],\r\n      onLegendMouseOver,\r\n      onLegendMouseOut\r\n    );\r\n\r\n    this.render();\r\n  }\r\n\r\n  getCountyRate(countyName, race) {\r\n    const element = document.querySelector(\r\n      `path[${COUNTY_NAME_ATTRIBUTE}=\"${countyName}\"][data-race=\"${race}\"]`\r\n    );\r\n    return Number(element.getAttribute(\"data-rate\"));\r\n  }\r\n\r\n  onChildMouseEnter(event) {\r\n    const countyName = event.target.getAttribute(COUNTY_NAME_ATTRIBUTE);\r\n    const tooltipData = {\r\n      name: countyName,\r\n      black: this.getCountyRate(countyName, \"black\"),\r\n      white: this.getCountyRate(countyName, \"white\")\r\n    };\r\n    this.black._onMouseEnter(countyName, tooltipData);\r\n    this.white._onMouseEnter(countyName, tooltipData);\r\n    this.highlightBarFromMap(event.target);\r\n  }\r\n\r\n  onChildMouseOut(event) {\r\n    const countyName = event.target.getAttribute(COUNTY_NAME_ATTRIBUTE);\r\n    this.black._onMouseOut(countyName);\r\n    this.white._onMouseOut(countyName);\r\n    this.resetHighlight();\r\n  }\r\n\r\n  highlightBarFromLegend(element) {\r\n    const bucket = element.getAttribute(BUCKET_ATTRIBUTE);\r\n    this.legend.highlightBars([bucket]);\r\n  }\r\n\r\n  highlightBarFromMap(element) {\r\n    const countyName = element.getAttribute(COUNTY_NAME_ATTRIBUTE);\r\n    const buckets = [\r\n      this.black.getBucket(countyName),\r\n      this.white.getBucket(countyName)\r\n    ];\r\n    this.legend.highlightBars(buckets);\r\n  }\r\n\r\n  highlightMap(element) {\r\n    this.black.highlightMap(element);\r\n    this.white.highlightMap(element);\r\n  }\r\n\r\n  resetHighlight() {\r\n    this.black.resetHighlight();\r\n    this.white.resetHighlight();\r\n    this.legend.resetHighlight();\r\n  }\r\n\r\n  render() {\r\n    this.legend.render();\r\n    this.black.render();\r\n    this.white.render();\r\n  }\r\n}\r\n\r\nexport class SwitchableMap {\r\n  constructor(leftMap, rightMap, container) {\r\n    this.leftMap = leftMap;\r\n    this.rightMap = rightMap;\r\n    this.container = container;\r\n\r\n    // set up switch buttons\r\n    this.rightSwitch = container\r\n      .getElementsByClassName(\"switch-container\")[0]\r\n      .getElementsByClassName(\"right\")[0];\r\n    this.rightSwitch.addEventListener(\"click\", this.showRightTable.bind(this));\r\n\r\n    this.leftSwitch = container\r\n      .getElementsByClassName(\"switch-container\")[0]\r\n      .getElementsByClassName(\"left\")[0];\r\n    this.leftSwitch.addEventListener(\"click\", this.showLeftTable.bind(this));\r\n\r\n    // show left table by default\r\n    this.showLeftTable();\r\n  }\r\n\r\n  showLeftTable() {\r\n    const leftContainer = document.getElementById(this.leftMap.id);\r\n    const rightContainer = document.getElementById(this.rightMap.id);\r\n    leftContainer.style.display = \"block\";\r\n    rightContainer.style.display = \"none\";\r\n    this.leftSwitch.classList.add(\"showing\");\r\n    this.rightSwitch.classList.remove(\"showing\");\r\n  }\r\n\r\n  showRightTable() {\r\n    const leftContainer = document.getElementById(this.leftMap.id);\r\n    const rightContainer = document.getElementById(this.rightMap.id);\r\n    leftContainer.style.display = \"none\";\r\n    rightContainer.style.display = \"block\";\r\n    this.leftSwitch.classList.remove(\"showing\");\r\n    this.rightSwitch.classList.add(\"showing\");\r\n  }\r\n}\r\n","export {default as bbox} from \"./bbox.js\";\nexport {default as feature} from \"./feature.js\";\nexport {default as mesh, meshArcs} from \"./mesh.js\";\nexport {default as merge, mergeArcs} from \"./merge.js\";\nexport {default as neighbors} from \"./neighbors.js\";\nexport {default as quantize} from \"./quantize.js\";\nexport {default as transform} from \"./transform.js\";\nexport {default as untransform} from \"./untransform.js\";\n","import transform from \"./transform.js\";\n\nexport default function(topology) {\n  var t = transform(topology.transform), key,\n      x0 = Infinity, y0 = x0, x1 = -x0, y1 = -x0;\n\n  function bboxPoint(p) {\n    p = t(p);\n    if (p[0] < x0) x0 = p[0];\n    if (p[0] > x1) x1 = p[0];\n    if (p[1] < y0) y0 = p[1];\n    if (p[1] > y1) y1 = p[1];\n  }\n\n  function bboxGeometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(bboxGeometry); break;\n      case \"Point\": bboxPoint(o.coordinates); break;\n      case \"MultiPoint\": o.coordinates.forEach(bboxPoint); break;\n    }\n  }\n\n  topology.arcs.forEach(function(arc) {\n    var i = -1, n = arc.length, p;\n    while (++i < n) {\n      p = t(arc[i], i);\n      if (p[0] < x0) x0 = p[0];\n      if (p[0] > x1) x1 = p[0];\n      if (p[1] < y0) y0 = p[1];\n      if (p[1] > y1) y1 = p[1];\n    }\n  });\n\n  for (key in topology.objects) {\n    bboxGeometry(topology.objects[key]);\n  }\n\n  return [x0, y0, x1, y1];\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2, n = input.length, output = new Array(n);\n    output[0] = (x0 += input[0]) * kx + dx;\n    output[1] = (y0 += input[1]) * ky + dy;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n","export default function(x) {\n  return x;\n}\n","import reverse from \"./reverse.js\";\nimport transform from \"./transform.js\";\n\nexport default function(topology, o) {\n  if (typeof o === \"string\") o = topology.objects[o];\n  return o.type === \"GeometryCollection\"\n      ? {type: \"FeatureCollection\", features: o.geometries.map(function(o) { return feature(topology, o); })}\n      : feature(topology, o);\n}\n\nfunction feature(topology, o) {\n  var id = o.id,\n      bbox = o.bbox,\n      properties = o.properties == null ? {} : o.properties,\n      geometry = object(topology, o);\n  return id == null && bbox == null ? {type: \"Feature\", properties: properties, geometry: geometry}\n      : bbox == null ? {type: \"Feature\", id: id, properties: properties, geometry: geometry}\n      : {type: \"Feature\", id: id, bbox: bbox, properties: properties, geometry: geometry};\n}\n\nexport function object(topology, o) {\n  var transformPoint = transform(topology.transform),\n      arcs = topology.arcs;\n\n  function arc(i, points) {\n    if (points.length) points.pop();\n    for (var a = arcs[i < 0 ? ~i : i], k = 0, n = a.length; k < n; ++k) {\n      points.push(transformPoint(a[k], k));\n    }\n    if (i < 0) reverse(points, n);\n  }\n\n  function point(p) {\n    return transformPoint(p);\n  }\n\n  function line(arcs) {\n    var points = [];\n    for (var i = 0, n = arcs.length; i < n; ++i) arc(arcs[i], points);\n    if (points.length < 2) points.push(points[0]); // This should never happen per the specification.\n    return points;\n  }\n\n  function ring(arcs) {\n    var points = line(arcs);\n    while (points.length < 4) points.push(points[0]); // This may happen if an arc has only two points.\n    return points;\n  }\n\n  function polygon(arcs) {\n    return arcs.map(ring);\n  }\n\n  function geometry(o) {\n    var type = o.type, coordinates;\n    switch (type) {\n      case \"GeometryCollection\": return {type: type, geometries: o.geometries.map(geometry)};\n      case \"Point\": coordinates = point(o.coordinates); break;\n      case \"MultiPoint\": coordinates = o.coordinates.map(point); break;\n      case \"LineString\": coordinates = line(o.arcs); break;\n      case \"MultiLineString\": coordinates = o.arcs.map(line); break;\n      case \"Polygon\": coordinates = polygon(o.arcs); break;\n      case \"MultiPolygon\": coordinates = o.arcs.map(polygon); break;\n      default: return null;\n    }\n    return {type: type, coordinates: coordinates};\n  }\n\n  return geometry(o);\n}\n","export default function(array, n) {\n  var t, j = array.length, i = j - n;\n  while (i < --j) t = array[i], array[i++] = array[j], array[j] = t;\n}\n","import {object} from \"./feature.js\";\nimport stitch from \"./stitch.js\";\n\nexport default function(topology) {\n  return object(topology, meshArcs.apply(this, arguments));\n}\n\nexport function meshArcs(topology, object, filter) {\n  var arcs, i, n;\n  if (arguments.length > 1) arcs = extractArcs(topology, object, filter);\n  else for (i = 0, arcs = new Array(n = topology.arcs.length); i < n; ++i) arcs[i] = i;\n  return {type: \"MultiLineString\", arcs: stitch(topology, arcs)};\n}\n\nfunction extractArcs(topology, object, filter) {\n  var arcs = [],\n      geomsByArc = [],\n      geom;\n\n  function extract0(i) {\n    var j = i < 0 ? ~i : i;\n    (geomsByArc[j] || (geomsByArc[j] = [])).push({i: i, g: geom});\n  }\n\n  function extract1(arcs) {\n    arcs.forEach(extract0);\n  }\n\n  function extract2(arcs) {\n    arcs.forEach(extract1);\n  }\n\n  function extract3(arcs) {\n    arcs.forEach(extract2);\n  }\n\n  function geometry(o) {\n    switch (geom = o, o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\n      case \"LineString\": extract1(o.arcs); break;\n      case \"MultiLineString\": case \"Polygon\": extract2(o.arcs); break;\n      case \"MultiPolygon\": extract3(o.arcs); break;\n    }\n  }\n\n  geometry(object);\n\n  geomsByArc.forEach(filter == null\n      ? function(geoms) { arcs.push(geoms[0].i); }\n      : function(geoms) { if (filter(geoms[0].g, geoms[geoms.length - 1].g)) arcs.push(geoms[0].i); });\n\n  return arcs;\n}\n","export default function(topology, arcs) {\n  var stitchedArcs = {},\n      fragmentByStart = {},\n      fragmentByEnd = {},\n      fragments = [],\n      emptyIndex = -1;\n\n  // Stitch empty arcs first, since they may be subsumed by other arcs.\n  arcs.forEach(function(i, j) {\n    var arc = topology.arcs[i < 0 ? ~i : i], t;\n    if (arc.length < 3 && !arc[1][0] && !arc[1][1]) {\n      t = arcs[++emptyIndex], arcs[emptyIndex] = i, arcs[j] = t;\n    }\n  });\n\n  arcs.forEach(function(i) {\n    var e = ends(i),\n        start = e[0],\n        end = e[1],\n        f, g;\n\n    if (f = fragmentByEnd[start]) {\n      delete fragmentByEnd[f.end];\n      f.push(i);\n      f.end = end;\n      if (g = fragmentByStart[end]) {\n        delete fragmentByStart[g.start];\n        var fg = g === f ? f : f.concat(g);\n        fragmentByStart[fg.start = f.start] = fragmentByEnd[fg.end = g.end] = fg;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else if (f = fragmentByStart[end]) {\n      delete fragmentByStart[f.start];\n      f.unshift(i);\n      f.start = start;\n      if (g = fragmentByEnd[start]) {\n        delete fragmentByEnd[g.end];\n        var gf = g === f ? f : g.concat(f);\n        fragmentByStart[gf.start = g.start] = fragmentByEnd[gf.end = f.end] = gf;\n      } else {\n        fragmentByStart[f.start] = fragmentByEnd[f.end] = f;\n      }\n    } else {\n      f = [i];\n      fragmentByStart[f.start = start] = fragmentByEnd[f.end = end] = f;\n    }\n  });\n\n  function ends(i) {\n    var arc = topology.arcs[i < 0 ? ~i : i], p0 = arc[0], p1;\n    if (topology.transform) p1 = [0, 0], arc.forEach(function(dp) { p1[0] += dp[0], p1[1] += dp[1]; });\n    else p1 = arc[arc.length - 1];\n    return i < 0 ? [p1, p0] : [p0, p1];\n  }\n\n  function flush(fragmentByEnd, fragmentByStart) {\n    for (var k in fragmentByEnd) {\n      var f = fragmentByEnd[k];\n      delete fragmentByStart[f.start];\n      delete f.start;\n      delete f.end;\n      f.forEach(function(i) { stitchedArcs[i < 0 ? ~i : i] = 1; });\n      fragments.push(f);\n    }\n  }\n\n  flush(fragmentByEnd, fragmentByStart);\n  flush(fragmentByStart, fragmentByEnd);\n  arcs.forEach(function(i) { if (!stitchedArcs[i < 0 ? ~i : i]) fragments.push([i]); });\n\n  return fragments;\n}\n","import {object} from \"./feature.js\";\nimport stitch from \"./stitch.js\";\n\nfunction planarRingArea(ring) {\n  var i = -1, n = ring.length, a, b = ring[n - 1], area = 0;\n  while (++i < n) a = b, b = ring[i], area += a[0] * b[1] - a[1] * b[0];\n  return Math.abs(area); // Note: doubled area!\n}\n\nexport default function(topology) {\n  return object(topology, mergeArcs.apply(this, arguments));\n}\n\nexport function mergeArcs(topology, objects) {\n  var polygonsByArc = {},\n      polygons = [],\n      groups = [];\n\n  objects.forEach(geometry);\n\n  function geometry(o) {\n    switch (o.type) {\n      case \"GeometryCollection\": o.geometries.forEach(geometry); break;\n      case \"Polygon\": extract(o.arcs); break;\n      case \"MultiPolygon\": o.arcs.forEach(extract); break;\n    }\n  }\n\n  function extract(polygon) {\n    polygon.forEach(function(ring) {\n      ring.forEach(function(arc) {\n        (polygonsByArc[arc = arc < 0 ? ~arc : arc] || (polygonsByArc[arc] = [])).push(polygon);\n      });\n    });\n    polygons.push(polygon);\n  }\n\n  function area(ring) {\n    return planarRingArea(object(topology, {type: \"Polygon\", arcs: [ring]}).coordinates[0]);\n  }\n\n  polygons.forEach(function(polygon) {\n    if (!polygon._) {\n      var group = [],\n          neighbors = [polygon];\n      polygon._ = 1;\n      groups.push(group);\n      while (polygon = neighbors.pop()) {\n        group.push(polygon);\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            polygonsByArc[arc < 0 ? ~arc : arc].forEach(function(polygon) {\n              if (!polygon._) {\n                polygon._ = 1;\n                neighbors.push(polygon);\n              }\n            });\n          });\n        });\n      }\n    }\n  });\n\n  polygons.forEach(function(polygon) {\n    delete polygon._;\n  });\n\n  return {\n    type: \"MultiPolygon\",\n    arcs: groups.map(function(polygons) {\n      var arcs = [], n;\n\n      // Extract the exterior (unique) arcs.\n      polygons.forEach(function(polygon) {\n        polygon.forEach(function(ring) {\n          ring.forEach(function(arc) {\n            if (polygonsByArc[arc < 0 ? ~arc : arc].length < 2) {\n              arcs.push(arc);\n            }\n          });\n        });\n      });\n\n      // Stitch the arcs into one or more rings.\n      arcs = stitch(topology, arcs);\n\n      // If more than one ring is returned,\n      // at most one of these rings can be the exterior;\n      // choose the one with the greatest absolute area.\n      if ((n = arcs.length) > 1) {\n        for (var i = 1, k = area(arcs[0]), ki, t; i < n; ++i) {\n          if ((ki = area(arcs[i])) > k) {\n            t = arcs[0], arcs[0] = arcs[i], arcs[i] = t, k = ki;\n          }\n        }\n      }\n\n      return arcs;\n    }).filter(function(arcs) {\n      return arcs.length > 0;\n    })\n  };\n}\n","import bisect from \"./bisect.js\";\n\nexport default function(objects) {\n  var indexesByArc = {}, // arc index -> array of object indexes\n      neighbors = objects.map(function() { return []; });\n\n  function line(arcs, i) {\n    arcs.forEach(function(a) {\n      if (a < 0) a = ~a;\n      var o = indexesByArc[a];\n      if (o) o.push(i);\n      else indexesByArc[a] = [i];\n    });\n  }\n\n  function polygon(arcs, i) {\n    arcs.forEach(function(arc) { line(arc, i); });\n  }\n\n  function geometry(o, i) {\n    if (o.type === \"GeometryCollection\") o.geometries.forEach(function(o) { geometry(o, i); });\n    else if (o.type in geometryType) geometryType[o.type](o.arcs, i);\n  }\n\n  var geometryType = {\n    LineString: line,\n    MultiLineString: polygon,\n    Polygon: polygon,\n    MultiPolygon: function(arcs, i) { arcs.forEach(function(arc) { polygon(arc, i); }); }\n  };\n\n  objects.forEach(geometry);\n\n  for (var i in indexesByArc) {\n    for (var indexes = indexesByArc[i], m = indexes.length, j = 0; j < m; ++j) {\n      for (var k = j + 1; k < m; ++k) {\n        var ij = indexes[j], ik = indexes[k], n;\n        if ((n = neighbors[ij])[i = bisect(n, ik)] !== ik) n.splice(i, 0, ik);\n        if ((n = neighbors[ik])[i = bisect(n, ij)] !== ij) n.splice(i, 0, ij);\n      }\n    }\n  }\n\n  return neighbors;\n}\n","export default function(a, x) {\n  var lo = 0, hi = a.length;\n  while (lo < hi) {\n    var mid = lo + hi >>> 1;\n    if (a[mid] < x) lo = mid + 1;\n    else hi = mid;\n  }\n  return lo;\n}\n","import bbox from \"./bbox.js\";\nimport untransform from \"./untransform.js\";\n\nexport default function(topology, transform) {\n  if (topology.transform) throw new Error(\"already quantized\");\n\n  if (!transform || !transform.scale) {\n    if (!((n = Math.floor(transform)) >= 2)) throw new Error(\"n must be 2\");\n    box = topology.bbox || bbox(topology);\n    var x0 = box[0], y0 = box[1], x1 = box[2], y1 = box[3], n;\n    transform = {scale: [x1 - x0 ? (x1 - x0) / (n - 1) : 1, y1 - y0 ? (y1 - y0) / (n - 1) : 1], translate: [x0, y0]};\n  } else {\n    box = topology.bbox;\n  }\n\n  var t = untransform(transform), box, key, inputs = topology.objects, outputs = {};\n\n  function quantizePoint(point) {\n    return t(point);\n  }\n\n  function quantizeGeometry(input) {\n    var output;\n    switch (input.type) {\n      case \"GeometryCollection\": output = {type: \"GeometryCollection\", geometries: input.geometries.map(quantizeGeometry)}; break;\n      case \"Point\": output = {type: \"Point\", coordinates: quantizePoint(input.coordinates)}; break;\n      case \"MultiPoint\": output = {type: \"MultiPoint\", coordinates: input.coordinates.map(quantizePoint)}; break;\n      default: return input;\n    }\n    if (input.id != null) output.id = input.id;\n    if (input.bbox != null) output.bbox = input.bbox;\n    if (input.properties != null) output.properties = input.properties;\n    return output;\n  }\n\n  function quantizeArc(input) {\n    var i = 0, j = 1, n = input.length, p, output = new Array(n); // pessimistic\n    output[0] = t(input[0], 0);\n    while (++i < n) if ((p = t(input[i], i))[0] || p[1]) output[j++] = p; // non-coincident points\n    if (j === 1) output[j++] = [0, 0]; // an arc must have at least two points\n    output.length = j;\n    return output;\n  }\n\n  for (key in inputs) outputs[key] = quantizeGeometry(inputs[key]);\n\n  return {\n    type: \"Topology\",\n    bbox: box,\n    transform: transform,\n    objects: outputs,\n    arcs: topology.arcs.map(quantizeArc)\n  };\n}\n","import identity from \"./identity.js\";\n\nexport default function(transform) {\n  if (transform == null) return identity;\n  var x0,\n      y0,\n      kx = transform.scale[0],\n      ky = transform.scale[1],\n      dx = transform.translate[0],\n      dy = transform.translate[1];\n  return function(input, i) {\n    if (!i) x0 = y0 = 0;\n    var j = 2,\n        n = input.length,\n        output = new Array(n),\n        x1 = Math.round((input[0] - dx) / kx),\n        y1 = Math.round((input[1] - dy) / ky);\n    output[0] = x1 - x0, x0 = x1;\n    output[1] = y1 - y0, y0 = y1;\n    while (j < n) output[j] = input[j], ++j;\n    return output;\n  };\n}\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$dd40b9949c102a18$export$b0eb41d134a3444e","$dd40b9949c102a18$export$8f762ceff330fdba","$dd40b9949c102a18$export$8c49d322883a3053","$9NlP8","$9lyWK","$gnvXE","$ixxlC","$ge6e3","$4UL1w","$dd40b9949c102a18$var$ColorScaleLegend","constructor","labels","colorThreshold","averages","onMouseOver","onMouseOut","title","offsetY","svgWidth","Number","getComputedStyle","document","querySelector","width","replace","legendWidth","sectionWidth","length","sectionHeight","offsetX","labelOffsetX","labelOffsetY","svgHeight","svg","select","append","attr","highlightBars","buckets","selectAll","style","forEach","bucket","BUCKET_ATTRIBUTE","resetHighlight","render","legend","data","slice","enter","d","_","i","on","event","legendTextClassName","smallLabelOffset","toString","color","start","end","invertExtent","text","toPercent","maxValue","avg","position","getPercentOffset","value","avgOffsetX","label","$dd40b9949c102a18$var$Map","selector","tooltipSchema","DEFAULT_MAP_WIDTH","DEFAULT_MAP_HEIGHT","projection","geoMercator","scale","center","renderTooltip","configureTooltip","placement","renderCity","name","coords","labelCoords","renderCities","renderPA","features","path","COUNTY_NAME_ATTRIBUTE","feature","properties","onMouseEnter","bind","showTooltip","target","hideTooltip","element","tooltip","show","hide","destroy","highlightMap","getAttribute","attributeSelector","classed","geoPath","countyTopoJson","JSON","parse","stringify","COUNTY_MAP_DATA","default","objects","rateKey","average","tooltipHeader","rows","rowHeader","dataKey","getColorThreshold","BAIL_RATE_MAP_COLOR_CONFIG","domain","colors","onLegendMouseOver","highlightBar","onLegendMouseOut","countyName","countyRate","x","row","cashBailRate","find","f","rate","paths","$dd40b9949c102a18$var$BailRaceMap","race","parent","countyNameToBucket","_onMouseEnter","tooltipData","nameAttributeSelector","raceAttributeSelector","node","_onMouseOut","onChildMouseEnter","onChildMouseOut","getBucket","createHatchPatterns","Set","pattern","outlier","push","BAIL_RATE_RACE_MAP_COLOR_CONFIG","black","white","highlightBarFromLegend","getCountyRate","highlightBarFromMap","leftMap","rightMap","container","rightSwitch","getElementsByClassName","addEventListener","showRightTable","leftSwitch","showLeftTable","leftContainer","getElementById","rightContainer","display","classList","add","remove","$8045be1669b35f90$export$2e2bcd8739ae039","$k6zly","topology","key","t","transform","x0","Infinity","y0","x1","y1","bboxPoint","p","arcs","arc","bboxGeometry","o","type","geometries","coordinates","$ea2fc94c04aa5385$export$2e2bcd8739ae039","$9nZjx","kx","ky","dx","translate","dy","input","j","output","Array","$6d55d2c6180e495a$export$2e2bcd8739ae039","$6ce12edae041358d$export$2e2bcd8739ae039","$6ce12edae041358d$export$be5493f9613cbbe","$a90ji","map","$6ce12edae041358d$var$feature","bbox","geometry","transformPoint","point","line","points","pop","a","k","ring","polygon","$762afc43b78022d9$export$2e2bcd8739ae039","array","$8f6583df6ba62f85$export$2e2bcd8739ae039","stitchedArcs","fragmentByStart","fragmentByEnd","fragments","emptyIndex","flush","p1","p0","g","dp","fg","concat","unshift","gf","$6277025897c99170$export$2e2bcd8739ae039","lo","hi","mid","$211e21570c070783$export$2e2bcd8739ae039","Math","round"],"version":3,"file":"bail-trends.5c6db565.js.map"}